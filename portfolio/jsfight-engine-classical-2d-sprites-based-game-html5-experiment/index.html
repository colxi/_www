<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES">

<head>

	
	<title>colxi | JSFight Engine: Classical 2D sprites based game (HTML5 experiment)</title>
    <meta name="BRANKIC_VAR_PREFIX" content="bigbangwp_" />
    <meta name="BRANKIC_THEME" content="BigBang WP Template" />  
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel='start' href='/'>
    <link rel='alternate' href='/wp-content/uploads/2012/11/logo2012_grey.jpg'>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="pingback" href="/xmlrpc.php" />
	<meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <meta name="viewport" content="width=device-width" /> 
	<!-- Favicon -->
	<link rel="shortcut icon" href="/wp-content/themes/BigBangWP_Main_File_v1.3/bigbangwp/bra_favicon.ico" />	
	    
    
    <link href='http://fonts.googleapis.com/css?family=Oswald:400,700,300' rel='stylesheet' type='text/css' />    <style type="text/css">
    <!--
    h1.title, h2.title, h3.title, h4.title, h5.title, h6.title, #primary-menu ul li a, .section-title .title, .section-title .title a, .section-title h1.title span, .section-title p, #footer h3, .services h2, .item-info h3, .item-info-overlay h3, #contact-intro h1.title, #contact-intro p, .widget h3.title, .post-title h2.title, .post-title h2.title a {
        font-family: 'Oswald', sans-serif;    }
    -->
    </style>
    
	
    
    

<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="colxi &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="colxi &raquo; RSS de los comentarios" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="colxi &raquo; JSFight Engine: Classical 2D sprites based game (HTML5 experiment) RSS de los comentarios" href="/portfolio/jsfight-engine-classical-2d-sprites-based-game-html5-experiment/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.7"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='default_stylesheet-css'  href='/wp-content/themes/bigbangwp/style.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='/wp-content/themes/bigbangwp/css/style.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='css_color_style-css'  href='/wp-content/themes/bigbangwp/css/colors/color-orange.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='blog-css'  href='/wp-content/themes/bigbangwp/css/blog.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='socialize-bookmarks-css'  href='/wp-content/themes/bigbangwp/css/socialize-bookmarks.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='prettyPhoto-css'  href='/wp-content/themes/bigbangwp/css/prettyPhoto.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='jquery_flexslider-css'  href='/wp-content/themes/bigbangwp/css/flexslider.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='style-stretched-css'  href='/wp-content/themes/bigbangwp/css/style-stretched.css?ver=4.8.7' type='text/css' media='all' />
<link rel='stylesheet' id='codecolorer-css'  href='/wp-content/plugins/codecolorer/codecolorer.css?ver=0.9.10' type='text/css' media='screen' />
<link rel='stylesheet' id='core3.0-css'  href='/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='core-RDark3.0-css'  href='/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCoreRDark.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='theme-RDark3.0-css'  href='/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0' type='text/css' media='all' />
<!-- This site uses the Google Analytics by MonsterInsights plugin v6.2.0 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script type="text/javascript" data-cfasync="false">
	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	var disableStr = 'ga-disable-UA-606041-5';
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-606041-5', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');
</script>
<!-- / Google Analytics by MonsterInsights -->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/custom.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/prettyPhoto.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/jquery.isotope.min.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/jquery.flexslider.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/jquery.backstretch.min.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/comment-form-validate.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-content/themes/bigbangwp/javascript/bra.photostream.js?ver=4.8.7'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='PHPConsole: Browser PHP console' href='/portfolio/phpconsole-compact-php-browser-based-console/' />
<link rel='next' title='JSMIDIparser javascript Library : .MIDI file to JS Object' href='/portfolio/jsmidiparser-midi-binary-file-to-javascript-object-library/' />
<link rel="canonical" href="/portfolio/jsfight-engine-classical-2d-sprites-based-game-html5-experiment/" />
<link rel='shortlink' href='/?p=739' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fportfolio%2Fjsfight-engine-classical-2d-sprites-based-game-html5-experiment%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fportfolio%2Fjsfight-engine-classical-2d-sprites-based-game-html5-experiment%2F&#038;format=xml" />

<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code Begin -->
<style type='text/css'>
.syntaxhighlighter,
.syntaxhighlighter a,
.syntaxhighlighter div,
.syntaxhighlighter code,
.syntaxhighlighter table,
.syntaxhighlighter table td,
.syntaxhighlighter table tr,
.syntaxhighlighter table tbody,
.syntaxhighlighter table thead,
.syntaxhighlighter table caption,
.syntaxhighlighter textarea {
font-size: 10px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter table caption {
/* For Title(Caption) */  
font-size: 10px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.syntaxhighlighter.nogutter td.code .line {
/* Set the left padding space when no-gutter in ver. 3.0 */  
padding-left: 3px !important;
}
.syntaxhighlighter {
/* For Chrome/Safari(WebKit) */  
/* Hide the superfluous vertical scrollbar in ver. 3.0 */  
padding: 1px !important;
 
}
.widget-area.syntaxhighlighter a,
.widget-area.syntaxhighlighter div,
.widget-area.syntaxhighlighter code,
.widget-area.syntaxhighlighter table,
.widget-area.syntaxhighlighter table td,
.widget-area.syntaxhighlighter table tr,
.widget-area.syntaxhighlighter table tbody,
.widget-area.syntaxhighlighter table thead,
.widget-area.syntaxhighlighter table caption,
.widget-area.syntaxhighlighter textarea {
/* For Widget */  
font-size: 14px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
.widget-area table caption {
/* For Widget */  
/* For Title(Caption) */  
font-size: 10px !important; /* Set the font size in pixels */  
font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important; /* Set the font type */  
}
</style>
<!-- WP SyntaxHighlighter Ver.1.7.3 CSS for code End -->
</head>
<body id="top" class="portfolio_item-template-default single single-portfolio_item postid-739 single-format-standard">

    <!-- START HEADER -->
    
  
    
    <!-- END HEADER -->
<div id="wrapper"  class='clear'>    

<div class="content-wrapper clear">

			
    <div class="section-title">
    
        <h1 class="title">JSFight Engine: Classical 2D sprites based game (HTML5 experiment)</h1>
                      
    </div><!--END SECTION TITLE-->  
    
    <div class="one-third">
            
        <p><em>JSFight Engine</em> is a classical 2D sprites based game prototype, coded with HTML5 as a simple experiment. The objective was the testing of the HTML5 <code class="codecolorer html4strict default"><span class="html4strict">canvas</span></code> object and its performance. Through the keyboard user is able to move arround the screen the character and perform some attack actions.<br />
<strong>Note: All graphic material of this experiment is copyrighted by</strong> <strong><a href="http://www.capcom.com/" target="_blank">Capcom</a></strong>.</p>
<p><span class='highlight1'><strong>Comments:</strong></span><br />
There is a lot of work to do, to convert this simple experiment into a complete fight game engine, or something minimally playable, but there are stablished in the code,  the basis of character/action definitions, user input handlig and image rendering.<br />
The code is quite easy to understand, and it&#8217;s generally commented.</p>
<address> </address>
<blockquote><p><strong>Download <a href="/wp-content/uploads/2012/11/JSFightEngine_0.2.zip">JSFightEngine_0.2.zip</a></strong><br />
Version 0.2 (06/2012)</p></blockquote>
<p>&nbsp;</p>
    
        
        <br /><br />                             
        <ul class="item-nav">
            <li class='prev'> <a href="/portfolio/phpconsole-compact-php-browser-based-console/" rel="prev">PHPConsole: Browser PHP console</a> </li>            <li class="all"><a href="/" title="All items">All</a></li>
            <li class='next'> <a href="/portfolio/jsmidiparser-midi-binary-file-to-javascript-object-library/" rel="next">JSMIDIparser javascript Library : .MIDI file to JS Object</a> </li>		</ul><!--END ITEM-NAV-->        
        
    </div><!--END ONE-THIRD-->
<script type='text/javascript'>
jQuery(document).ready(function($){
    $(".one-third h1, .one-third h2, .one-third h3, .one-third h4, .one-third h5, .one-third h6").addClass("title");
})    
    
</script>
     
    <div class="two-third last">
<p><canvas id="micanvas" width="627" height="265"  style="background-color:grey;"></canvas><script src="/wp-content/uploads/2012/11/JSFEplayer.js"></script><script src="/wp-content/uploads/2012/11/JSFE.js"></script><br />
<script>
		jsFightEngine.init('micanvas',18,0.8,'/wp-content/uploads/2012/11/Lb2villageoftwilightbg.gif','/wp-content/uploads/2012/11/CVS2_Akuma.png');
</script><img class="alignleft size-full wp-image-752" title="" src="/wp-content/uploads/2012/11/JSFE_instructions.jpg" alt="" width="641" height="69" srcset="/wp-content/uploads/2012/11/JSFE_instructions.jpg 641w, /wp-content/uploads/2012/11/JSFE_instructions-300x32.jpg 300w" sizes="(max-width: 641px) 100vw, 641px" /><br />
</p>
<div class="codecolorer-container javascript railscasts" style="overflow:auto;white-space:nowrap;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br /></div></td><td><div class="javascript codecolorer"><span class="co1">//---- code from JJFE.js ----//</span><br />
<br />
<span class="coMULTI">/*<br />
Experiment Name: JSFight Engine<br />
Usage: call jsFightEngine.init(canvasID,fps,zoom,map,playerSprites) function.<br />
Description: Simple incomplete HTML5 fight game engine. <br />
Version: 0.2<br />
Author: c0lx1<br />
Author URI: /<br />
*/</span><br />
<span class="coMULTI">/*<br />
&nbsp; &nbsp; This program is free software; you can redistribute it and/or modify<br />
&nbsp; &nbsp; it under the terms of the GNU General Public License as published by<br />
&nbsp; &nbsp; the Free Software Foundation; either version 2 of the License, or<br />
&nbsp; &nbsp; (at your option) any later version.<br />
<br />
&nbsp; &nbsp; This program is distributed in the hope that it will be useful,<br />
&nbsp; &nbsp; but WITHOUT ANY WARRANTY; without even the implied warranty of<br />
&nbsp; &nbsp; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. &nbsp;See the<br />
&nbsp; &nbsp; GNU General Public License for more details.<br />
*/</span><br />
jsFightEngine <span class="sy0">=</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; keydown <span class="sy0">:</span> &nbsp;<span class="kw1">function</span><span class="br0">&#40;</span>event<span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> _keyAction <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">keyConfig</span><span class="br0">&#91;</span>event.<span class="me1">keyCode</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if key action is not already on list</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span>_keyAction<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// add it</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">push</span><span class="br0">&#40;</span>_keyAction<span class="br0">&#41;</span><span class="sy0">;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// it there is more than a single key pressed, </span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">length</span> <span class="sy0">&gt;=</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// check if special key assignement is neded</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;front&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jump&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span> <span class="sy0">&amp;&amp;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpfront&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">push</span><span class="br0">&#40;</span><span class="st0">&quot;jumpfront&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="kw1">else</span> <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;back&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jump&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span> <span class="sy0">&amp;&amp;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpback&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">push</span><span class="br0">&#40;</span><span class="st0">&quot;jumpback&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; console.<span class="me1">log</span><span class="br0">&#40;</span>event.<span class="me1">keyCode</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; event.<span class="me1">preventDefault</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; event.<span class="me1">stopPropagation</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; keyup <span class="sy0">:</span> <span class="kw1">function</span><span class="br0">&#40;</span>event<span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> _keyAction &nbsp;<span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">keyConfig</span><span class="br0">&#91;</span>event.<span class="me1">keyCode</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if there is a special combo key assigned</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction <span class="sy0">==</span> <span class="st0">&quot;front&quot;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jump&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">splice</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpfront&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="kw1">else</span> <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction <span class="sy0">==</span> <span class="st0">&quot;back&quot;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jump&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">splice</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpback&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="kw1">else</span> <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction <span class="sy0">==</span> <span class="st0">&quot;jump&quot;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;front&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">splice</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpfront&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;back&quot;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">splice</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span><span class="st0">&quot;jumpback&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// remove key from key monitor list</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">splice</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span>_keyAction<span class="br0">&#41;</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// check key action assignement</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction<span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// some actions understand a Key release as a cancellation of the action</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction <span class="sy0">==</span> <span class="st0">&quot;crouch&quot;</span> <span class="sy0">&amp;&amp;</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">name</span> <span class="sy0">==</span> <span class="st0">&quot;crouch&quot;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span> <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span>.<span class="me1">standup</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span> &nbsp;<span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; event.<span class="me1">preventDefault</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; event.<span class="me1">stopPropagation</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; keymonitor<span class="sy0">:</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; keylog<span class="sy0">:</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; config<span class="sy0">:</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; canvas &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="kw2">null</span><span class="sy0">,</span> &nbsp;<span class="co1">// canvas object</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">:</span> <span class="kw2">null</span><span class="sy0">,</span> <span class="co1">// canvas context</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fps &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; keyConfig &nbsp; <span class="sy0">:</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">39</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;front&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">37</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;back&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">40</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;crouch&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">38</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;jump&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">81</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;punch&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">87</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;punchstrong&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">65</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;kick&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="nu0">83</span> &nbsp; &nbsp; &nbsp;<span class="sy0">:</span> <span class="st0">&quot;kickstrong&quot;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; tick<span class="sy0">:</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> _keyAction <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span><span class="br0">&#91;</span><span class="kw1">this</span>.<span class="me1">keymonitor</span>.<span class="me1">length</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">||</span> <span class="kw2">false</span><span class="sy0">;</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp;if there is any key pushed currently...</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// and current player action can be canceled, and requested action is diferent than current action</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>_keyAction <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">mustEnd</span> <span class="sy0">&amp;&amp;</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">name</span> <span class="sy0">!=</span> _keyAction <span class="br0">&#41;</span><span class="br0">&#123;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if that key has an action assigned, and player has that action implemented</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span><span class="br0">&#91;</span>_keyAction<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// assign new action</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span><span class="br0">&#91;</span>_keyAction<span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span> &nbsp; <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// if &nbsp;current action has finished, put player in waiting mode...</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">sprites</span><span class="br0">&#91;</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// put character on waiting mode</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">name</span> <span class="sy0">==</span> <span class="st0">&quot;crouch&quot;</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span> <span class="sy0">-=</span> <span class="nu0">1</span><span class="sy0">;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span> <span class="sy0">=</span> &nbsp;<span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span><span class="br0">&#91;</span><span class="st0">&quot;standing&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> d <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw4">Date</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> lastCall <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">lastFrame</span> <span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">lastFrame</span> <span class="sy0">=</span> d.<span class="me1">getTime</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> fps <span class="sy0">=</span> <span class="kw4">Math</span>.<span class="me1">ceil</span><span class="br0">&#40;</span><span class="nu0">1000</span><span class="sy0">/</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">lastFrame</span> <span class="sy0">-</span> lastCall<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> _currentSprite <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">sprites</span><span class="br0">&#91;</span><span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// calculate player new position</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">x_position</span> <span class="sy0">+=</span> _currentSprite.<span class="me1">move</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">y_position</span> <span class="sy0">+=</span> _currentSprite.<span class="me1">move</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// draw background &nbsp;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">clearRect</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">width</span><span class="sy0">,</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">height</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">drawImage</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">sprites</span>.<span class="me1">engine</span>.<span class="me1">background</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">800</span><span class="sy0">,</span><span class="nu0">330</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">800</span><span class="sy0">,</span><span class="nu0">330</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// draw player character</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">drawImage</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">sprites</span>.<span class="me1">player1</span>.<span class="me1">spriteSheet</span><span class="sy0">,</span>_currentSprite.<span class="me1">xpos</span><span class="sy0">,</span>_currentSprite.<span class="me1">ypos</span><span class="sy0">,</span>_currentSprite.<span class="me1">width</span><span class="sy0">,</span>_currentSprite.<span class="me1">height</span><span class="sy0">,</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">x_position</span><span class="sy0">,</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">y_position</span> <span class="sy0">-</span> _currentSprite.<span class="me1">height</span><span class="sy0">,</span> _currentSprite.<span class="me1">width</span><span class="sy0">,</span> _currentSprite.<span class="me1">height</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">actualFrame</span> <span class="sy0">+=</span> <span class="nu0">1</span><span class="sy0">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">statusBar</span><span class="br0">&#40;</span>fps<span class="sy0">+</span> <span class="st0">&quot; FPS &quot;</span> <span class="sy0">+</span> <span class="st0">&quot; | Current: &quot;</span><span class="sy0">+</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span>.<span class="me1">name</span> <span class="sy0">+</span> <span class="st0">&quot; | KeyMonitor: &quot;</span> <span class="sy0">+</span> <span class="kw1">this</span>.<span class="me1">keymonitor</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// debug --&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//this.config.c.strokeStyle = '#f00'; // red</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//this.config.c.lineWidth &nbsp; = 1;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//this.config.c.strokeRect(this.player.x , (this.player.y - _currentSprite.height) , _currentSprite.width , _currentSprite.height);</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &lt;-- end debug</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; player <span class="sy0">:</span> <span class="br0">&#123;</span><span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; statusBar<span class="sy0">:</span> <span class="kw1">function</span><span class="br0">&#40;</span>_text<span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">fillStyle</span> <span class="sy0">=</span> <span class="st0">'#f0f0f0'</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">font</span> <span class="sy0">=</span> <span class="st0">'10px &nbsp;Lucida Console'</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">textBaseline</span> <span class="sy0">=</span> <span class="st0">'bottom'</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">fillText</span><span class="br0">&#40;</span>_text<span class="sy0">,</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">20</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; sprites<span class="sy0">:</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; engine<span class="sy0">:</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background<span class="sy0">:</span> <span class="kw1">new</span> Image<span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; player1<span class="sy0">:</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spriteSheet<span class="sy0">:</span> <span class="kw1">new</span> Image<span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; player2<span class="sy0">:</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spriteSheet<span class="sy0">:</span> <span class="kw1">new</span> Image<span class="br0">&#40;</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span><br />
&nbsp; &nbsp; init<span class="sy0">:</span> <span class="kw1">function</span><span class="br0">&#40;</span>id<span class="sy0">,</span>fps<span class="sy0">,</span>zoom<span class="sy0">,</span>map<span class="sy0">,</span>playerSprites<span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// initiation secuence, enviroment definitions</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">noCache</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span> <span class="co1">//&quot;?sID=&quot; + Math.floor(Math.random()*100); // prevent browser caching images. Just for developing pruposes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="sy0">=</span> document.<span class="me1">getElementById</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// catch object</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">tabIndex</span> <span class="sy0">||</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">tabIndex</span> <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">tabIndex</span> <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span> <span class="co1">// makes canvas focusable</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">getContext</span><span class="br0">&#40;</span><span class="st0">'2d'</span><span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// catch context</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">fps</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> fps <span class="sy0">||</span> <span class="nu0">24</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// user defined or default fps</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">c</span>.<span class="me1">scale</span><span class="br0">&#40;</span>zoom <span class="sy0">||</span> <span class="nu0">1</span><span class="sy0">,</span> zoom <span class="sy0">||</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// user defined or default</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// assign player 1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span> <span class="sy0">=</span> player<span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span>.<span class="me1">standing</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// load sprite sheet, and background</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">spritesheet</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> playerSprites<span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">sprites</span>.<span class="me1">player1</span>.<span class="me1">spriteSheet</span>.<span class="me1">src</span> &nbsp; &nbsp;<span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">spritesheet</span> <span class="sy0">+</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">noCache</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">sprites</span>.<span class="me1">engine</span>.<span class="me1">background</span>.<span class="me1">src</span> &nbsp; &nbsp; &nbsp;<span class="sy0">=</span> map<span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// LOADING SECUENCE ACOMPLISHED, engine ignition</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// set key event listeners for key monitoring</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">addEventListener</span><span class="br0">&#40;</span><span class="st0">&quot;keydown&quot;</span><span class="sy0">,</span><span class="kw1">this</span>.<span class="me1">keydown</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw2">false</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">addEventListener</span><span class="br0">&#40;</span><span class="st0">&quot;keyup&quot;</span><span class="sy0">,</span> <span class="kw1">this</span>.<span class="me1">keyup</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span> <span class="sy0">,</span> <span class="kw2">false</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// apply focus to recieve key strokes</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">canvas</span>.<span class="me1">focus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">currentAction</span> <span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span>.<span class="me1">standing</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// init clock at defined frames per second interval</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">statusBar</span><span class="br0">&#40;</span><span class="st0">&quot;LOADING sprites (2Mb)... please wait.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">sprites</span>.<span class="me1">player1</span>.<span class="me1">spriteSheet</span>.<span class="me1">onload</span><span class="sy0">=</span> <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">x_position</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="nu0">100</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">y_position</span> &nbsp; &nbsp; &nbsp; <span class="sy0">=</span> <span class="nu0">280</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">currentAction</span> &nbsp; &nbsp;<span class="sy0">=</span> <span class="kw1">this</span>.<span class="me1">player</span>.<span class="me1">actions</span>.<span class="me1">standing</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">clock</span> <span class="sy0">=</span> setInterval<span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">tick</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">1000</span> <span class="sy0">/</span> <span class="kw1">this</span>.<span class="me1">config</span>.<span class="me1">fps</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
<span class="br0">&#125;</span></div></td></tr></tbody></table></div>
 
 
               
    </div><!--END TWO-THIRD-->    



          





			
</div><!-- END CONTENT-WRAPPER --> 
</div><!-- END WRAPPER --> 
 
    
    
    <!-- START FOOTER -->
    
    <div id="footercustom">
    Portfolio | Conctact | Blog
	<div>

    
    <!-- END FOOTER -->    
 

          



<script type='text/javascript'>
jQuery(document).ready(function($){
})
 
</script>
 
<style type="text/css">
<!--
blockquote{ width:100% !important; }
#footer-bottom{background-color: transparent !important;}-->
</style>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.8.7'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.7'></script>
</body>
</html>			